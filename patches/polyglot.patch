From e066b06fa3078075e0e5c372c631a01e44087021 Mon Sep 17 00:00:00 2001
From: polirritmico <ebray187@gmail.com>
Date: Tue, 5 Nov 2024 13:24:27 -0300
Subject: [PATCH] fix: Escape regex for use with Chirpy theme

---
 lib/jekyll/polyglot/patches/jekyll/site.rb | 12 ++++++++----
 1 file changed, 8 insertions(+), 4 deletions(-)

diff --git a/lib/jekyll/polyglot/patches/jekyll/site.rb b/lib/jekyll/polyglot/patches/jekyll/site.rb
index 250596bf..c0ea598f 100644
--- a/lib/jekyll/polyglot/patches/jekyll/site.rb
+++ b/lib/jekyll/polyglot/patches/jekyll/site.rb
@@ -224,10 +224,12 @@ module Jekyll
       regex = ''
       unless disabled
         @exclude.each do |x|
-          regex += "(?!#{x})"
+          escaped_x = Regex.escape(x)
+          regex += "(?!#{escaped_x})"
         end
         @languages.each do |x|
-          regex += "(?!#{x}\/)"
+          escaped_x = Regex.escape(x)
+          regex += "(?!#{escaped_x}\/)"
         end
       end
       start = disabled ? 'ferh' : 'href'
@@ -242,10 +244,12 @@ module Jekyll
       regex = ''
       unless disabled
         @exclude.each do |x|
-          regex += "(?!#{x})"
+          escaped_x = Regex.escape(x)
+          regex += "(?!#{escaped_x})"
         end
         @languages.each do |x|
-          regex += "(?!#{x}\/)"
+          escaped_x = Regex.escape(x)
+          regex += "(?!#{escaped_x}\/)"
         end
       end
       start = disabled ? 'ferh' : 'href'
-- 
2.45.2

